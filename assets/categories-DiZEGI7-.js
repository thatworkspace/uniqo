import{m as K,r as t,D as Q,j as e,C as w,H as S,I as U}from"./index-wjGqhj3o.js";import{a as i,d as F,c as X}from"./index.es-DeR8yEzQ.js";import{C as k,a as D}from"./CCardBody-DMCu4_kB.js";import{C as I}from"./CCardHeader-XmIsxALS.js";import{C as Y,a as Z}from"./CListGroupItem-DFqElXvt.js";import{c as ee,a as se}from"./cil-trash-JhHsuKen.js";import{C as ae}from"./CForm-XVigvA-h.js";import{C as te}from"./CFormLabel-Crzangdm.js";import{C as g}from"./CFormInput-BM-bW9F8.js";import{C as re}from"./CRow-p2SjJKpW.js";import{C as ie}from"./CInputGroup-hx87h2r3.js";import{C as oe,a as ne,b as le,c as ce}from"./CModalTitle-C9t_Ouvh.js";import{C as de}from"./CModalBody-iPV6VRG_.js";import"./CFormControlWrapper-BlbjTcIf.js";import"./CFormControlValidation-D7ITDnh2.js";import"./DefaultLayout-iwp_ctrC.js";const _e=()=>{const{t:a,i18n:y}=K(),[u,l]=t.useState(!1),[p,C]=t.useState(!1),[j,c]=t.useState(""),[b,d]=t.useState(""),[f,m]=t.useState(""),r=t.useRef(null),[L,M]=t.useState(""),[T,R]=t.useState([]),[A,E]=t.useState([]),[N,V]=t.useState(!0),[z,h]=t.useState(!1),[x,_]=t.useState(!1),o=t.useRef(null);t.useEffect(()=>{v(),r.current.setAttribute("process","NEW"),document.title="Admin - Categories"},[]);const v=async()=>{const s=await Q();R(s),E(s),V(!1)},$=()=>{r.current.setAttribute("process","NEW"),c(""),d(""),m(""),l(!0)},G=async s=>{switch(s.preventDefault(),r.current.getAttribute("process")){case"NEW":C(!0),await S(j,b,f);break;case"EDIT":C(!0),await S(j,b,f,r.current.getAttribute("id"));break}l(!1),v(),C(!1),c(""),d(""),m("")},W=s=>{o.current.setAttribute("process","DELETE"),o.current.setAttribute("id",s),h(!0)},B=s=>{l(!0),c(s.arName),d(s.frName),m(s.enName),r.current.setAttribute("process","EDIT"),r.current.setAttribute("id",s.id)},H=async()=>{const s=o.current.getAttribute("process"),n=o.current.getAttribute("id");switch(s){case"DELETE":_(!0),await U(n),_(!1),h(!1),v();break}},O=s=>{M(s);let n=T.filter(J=>J[`${y.language}Name`].toLowerCase().includes(s.toLowerCase()));E(n)},P=e.jsxs(e.Fragment,{children:[e.jsx("span",{ref:r}),!u&&e.jsx(e.Fragment,{children:e.jsxs(k,{className:"mb-4",children:[e.jsx(I,{children:a("admin_dashboard.categories.all_divisions")}),e.jsxs(D,{className:"px-1 px-sm-2",children:[!N&&e.jsx(Y,{className:"list-group-flush",children:A.map((s,n)=>e.jsx(Z,{children:e.jsxs("div",{className:"d-flex bd-highlight",children:[e.jsx("div",{className:"flex-grow-1 bd-highlight font-size-21px",children:s[`${y.language}Name`]}),e.jsxs(i,{color:"primary me-2 text-white",size:"sm",onClick:()=>B(s),children:[e.jsx(F,{icon:ee,style:{width:"15px"},customClassName:"nav-icon"}),e.jsx("span",{className:"d-none d-sm-inline ms-2",children:a("common.delete")})]}),e.jsxs(i,{color:"danger text-white",size:"sm",onClick:()=>W(s.id),children:[e.jsx(F,{icon:se,style:{width:"15px"},customClassName:"nav-icon"}),e.jsx("span",{className:"d-none d-sm-inline ms-2",children:a("common.edit")})]})]})},n))}),N&&e.jsx("div",{className:"text-center",children:e.jsx(w,{color:"white",className:"ms-2"})}),!N&&A.length=="0"&&e.jsxs("p",{className:"text-center my-3",children:[" ",a("common.no_results")]})]})]})})]}),q=e.jsx(e.Fragment,{children:u&&e.jsxs(k,{className:"mb-4",children:[e.jsx(I,{className:"py-0",children:e.jsxs("div",{className:"d-flex bd-highlight",children:[e.jsx("div",{className:"flex-grow-1 bd-highlight px-0",children:e.jsx("h4",{className:"mt-2 pt-1",children:r.current.getAttribute("process")=="NEW"?a("admin_dashboard.categories.add_new"):a("admin_dashboard.categories.edit")})}),e.jsx("div",{className:"p-2 pe-0 bd-highlight",children:e.jsx(i,{className:"float-end btn-block",onClick:()=>l(!1),type:"button",color:"danger",children:e.jsx("span",{className:"text-white",children:a("common.cancel")})})})]})}),e.jsx(D,{className:"px-1 px-sm-2",children:e.jsxs(ae,{onSubmit:G,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(te,{htmlFor:"exampleFormControlInput1",children:a("admin_dashboard.categories.name")}),e.jsx(g,{placeholder:a("admin_dashboard.categories.name")+` (${a("common.ar")})`,value:j,onChange:s=>c(s.target.value)}),e.jsx(g,{className:"mt-2",placeholder:a("admin_dashboard.categories.name")+` (${a("common.fr")})`,value:b,onChange:s=>d(s.target.value)}),e.jsx(g,{className:"mt-2",placeholder:a("admin_dashboard.categories.name")+` (${a("common.en")})`,value:f,onChange:s=>m(s.target.value)})]}),e.jsxs(i,{disabled:p,className:"float-end btn-block w-25",type:"submit",color:"success",children:[!p&&e.jsx("span",{className:"text-white",children:a("common.save")}),p&&e.jsxs("span",{children:[" ",e.jsx(w,{size:"sm",color:"white"})]})]})]})})]})});return e.jsxs(e.Fragment,{children:[e.jsx(re,{children:e.jsxs(X,{xs:12,className:"px-0 px-sm-2",children:[!u&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex bd-highlight",children:[e.jsx("div",{className:"p-2 flex-grow-1 bd-highlight px-0",children:e.jsx(ie,{className:"mb-3",children:e.jsx(g,{value:L,onChange:s=>O(s.target.value),placeholder:a("admin_dashboard.categories.search.placeholder")})})}),e.jsx("div",{className:"p-2 pe-0 bd-highlight",children:e.jsx(i,{className:"float-end btn-block text-white",onClick:()=>$(),type:"button",color:"primary",children:a("admin_dashboard.categories.add_new")})})]})}),q,P]})}),e.jsxs(e.Fragment,{children:[e.jsx("span",{ref:o}),e.jsxs(oe,{alignment:"center",backdrop:"static",visible:z,onClose:()=>h(!1),unmountOnClose:!0,className:"no-close",children:[e.jsx(ne,{children:e.jsx(le,{id:"VerticallyCenteredExample",children:a("admin_dashboard.categories.delete.title")})}),e.jsx(de,{children:a("admin_dashboard.categories.delete.description")}),e.jsxs(ce,{children:[e.jsx(i,{color:"secondary",disabled:x,onClick:()=>h(!1),children:a("common.cancel")}),e.jsxs(i,{color:"danger",disabled:x,className:" text-white",onClick:()=>H(),children:[!x&&a("common.confirm"),x&&e.jsxs("span",{children:[" ",e.jsx(w,{size:"sm",color:"white"})]})]})]})]})]})]})};export{_e as default};
